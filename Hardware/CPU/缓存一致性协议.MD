
缓存一致性协议
----------------------

缓存一致性协议有MSI，MESI，MOSI，Synapse，Firefly及DragonProtocol等等

### MESI
在MESI协议中，每个Cache line有4个状态，可用2个bit表示，它们分别是：
| **状态**             | **描述**    |
| -------------------- | ---------------------|
| M(Modified)<br/>修改 | 这行数据有效，数据被修改了，和内存中的数据不一致，数据只存在于本Cache中。 |
| E(Exclusive)<br>独占 | 这行数据有效，数据和内存中的数据一致，数据只存在于本Cache中。 |
| S(Shared)<br/>共享   | 这行数据有效，数据和内存中的数据一致，数据存在于很多Cache中。 |
| I(Invalid) <br>无效  | 这行数据无效 |

### MSI
在多处理器系统中，MSI(Modified-Shared-Invalid)是一个最基本的缓存一致性协议。
缓存中的每一个块（block）包括3中状态：
- Modified（M，已修改）
表示缓存中的块（block）已被修改。这时，缓存中的数据和后端存储（如，内存）不一致。当缓存被收回（内存被收回，块“block”数据将丢失）时，缓存负责将“M”状态（Modified）的块（block）写回到后端存储。
- Shared（S，共享）
表示缓存中的块（block）没有被修改，并且至少在一个缓存中存在一个只读状态（缓存中的块“block”数据有被读取拷贝）。缓存中的块（block）数据可以被收回（内存被收回，块“block”数据将丢失）而不需要写回到后端存储。
- Invalid（I，无效）
表示块（block）在当前缓存中不存在，这时，如果该块（block）需要存储在这个缓存中，必须从内存或其他缓存中读进来。





